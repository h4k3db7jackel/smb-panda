import socket
import random
import os

os.system('clear')

print("...$$$$$$\................$$$$$$$\............................................$$\...........")
print('..$$..__$$\...............$$..__$$\...........................................$$.|..........')
print('..$$./..\__|$$$$$$\$$$$\..$$.|..$$.|.......$$$$$$\...$$$$$$\..$$$$$$$\...$$$$$$$.|.$$$$$$\..')
print('..\$$$$$$\..$$.._$$.._$$\.$$$$$$$\.|......$$..__$$\..\____$$\.$$..__$$\.$$..__$$.|.\____$$\.')
print('...\____$$\.$$./.$$./.$$.|$$..__$$\.......$$./..$$.|.$$$$$$$.|$$.|..$$.|$$./..$$.|.$$$$$$$.|')
print('..$$\...$$.|$$.|.$$.|.$$.|$$.|..$$.|......$$.|..$$.|$$..__$$.|$$.|..$$.|$$.|..$$.|$$..__$$.|')
print('..\$$$$$$..|$$.|.$$.|.$$.|$$$$$$$..|......$$$$$$$..|\$$$$$$$.|$$.|..$$.|\$$$$$$$.|\$$$$$$$.|')
print('...\______/.\__|.\__|.\__|\_______/.......$$..____/..\_______|\__|..\__|.\_______|.\_______|')
print('..........................................$$.|..............................................') 
print('..........................................$$.|..............................................')
print('..........................................\__|..............................................')

print(' (IM NOT FUCKING RESPONSEABLE FOR YOUR RETARTED DECISIONS)')

#ip = ".".join(map(str, (random.randint(0, 255) 
 #                       for _ in range(4))))

print("")

ip = raw_input("RANGE (example 74.35.0.0/12):  ")
type(ip)

os.system('masscan -p445,445 ' + ip +' --rate=10000 > out.txt' )

os.system("cat out.txt | grep Dis | cut -b 33,34,35,36,37,38,39,40,41,42,43,44,45,46,47 | sed  -e 's/^/go run ms17-010.go -h /' > scan2.sh")

os.system('clear')

print("...$$$$$$\................$$$$$$$\............................................$$\...........")
print('..$$..__$$\...............$$..__$$\...........................................$$.|..........')
print('..$$./..\__|$$$$$$\$$$$\..$$.|..$$.|.......$$$$$$\...$$$$$$\..$$$$$$$\...$$$$$$$.|.$$$$$$\..')
print('..\$$$$$$\..$$.._$$.._$$\.$$$$$$$\.|......$$..__$$\..\____$$\.$$..__$$\.$$..__$$.|.\____$$\.')
print('...\____$$\.$$./.$$./.$$.|$$..__$$\.......$$./..$$.|.$$$$$$$.|$$.|..$$.|$$./..$$.|.$$$$$$$.|')
print('..$$\...$$.|$$.|.$$.|.$$.|$$.|..$$.|......$$.|..$$.|$$..__$$.|$$.|..$$.|$$.|..$$.|$$..__$$.|')
print('..\$$$$$$..|$$.|.$$.|.$$.|$$$$$$$..|......$$$$$$$..|\$$$$$$$.|$$.|..$$.|\$$$$$$$.|\$$$$$$$.|')
print('...\______/.\__|.\__|.\__|\_______/.......$$..____/..\_______|\__|..\__|.\_______|.\_______|')
print('..........................................$$.|..............................................') 
print('..........................................$$.|..............................................')
print('..........................................\__|..............................................')


print('IT TAKES A COUPLE FUCKING SECONDS TO DO ITS THING SO DONT BE IMPATIENT !!!')


os.system('chmod 777 scan2.sh')

os.system('bash scan2.sh | grep likely')
